<!DOCTYPE html>
<html>
  <head>
  	<!-- Bootstrap -->
  	<link rel="stylesheet" href="assets/css/bootstrap.min.css"/>
	<script src="assets/jQuery/jquery-3.3.1.min.js"></script>
	<script src="assets/jquery.csv.js"></script>
	<script src="assets/js/bootstrap.min.js"></script>
  	<link rel="stylesheet" href="assets/css/custom.css"/>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>UPS Dashboard History</title>
  </head>
  <body>
  	<script type="text/javascript" src="assets/Chartjs/dist/Chart.min.js"></script>
	<div id="navbar"></div>
	 <!-- include navbar -->
    <script type="text/javascript">
    	$(function() {
		    $("#navbar").load("navbar.html");
		});
    </script>

	<div class="container">
		<ul class="nav nav-tabs">
			<li role="presentation" class="active"><a href="#">Temperatur</a></li>
			<li role="presentation"><a href="#">Arus</a></li>
			<li role="presentation"><a href="#">Kapasitas Baterai</a></li>
		</ul>
		<div class="tab-content">
	    	<div id="home" class="tab-pane fade in active">
				<canvas id="tempChart" width="500" height="200" border="0"></canvas>
	    		<div align="center">
		    		<button class="btn btn-default">3 Hari</button>
		    		<button class="btn btn-default">7 Hari</button>
		    		<button class="btn btn-default">1 Bulan</button>
		    	</div>
			</div>
		</div>
	</div>

	<script>
		var dataLog;
		$.ajax({
		  type: "GET",  
		  url: "log/2018-10-temp.csv",
		  dataType: "text",
		  async: false,
		  success: function(response)  
		  {
			dataLog = $.csv.toObjects(response);
			// console.log(dataLog);
		  }   
		});
			console.log(dataLog);
			
    	// for 3 days record
    		// pakai fungsi biar tinggal panggil

    	var ctx = document.getElementById("tempChart").getContext('2d');
	    
    	// var lab = JSON.parse(dataLog);
    	// console.log(dataLog.map(function (a) { return a.datetime; }));

	    var temperatureChartData = {
	    	labels :  dataLog.map(function (a) { return a.time; }),
	    	datasets : [
	    		{
	    			label : "Temperatur",
	    			data : dataLog.map(function (a) { return a.temperature; }),
	    			fill : false, 
	    			borderColor : 'rgb(75, 192, 192)',
	    			lineTension : 0.1
	    		}
    		]
	    };
		var tempChart = new Chart(ctx, {
	        type: 'line',
	        data: temperatureChartData
	    });
    </script>


   
  </body>
</html>
